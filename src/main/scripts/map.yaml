python_preamble:
- import: base64
- import: re
- import: google.appengine.ext.bulkload.transform
- import: google.appengine.ext.bulkload.bulkloader_wizard
- import: google.appengine.api.datastore
- import: google.appengine.api.users

transformers:

- kind: Event
  connector: csv
  property_map:
    - property: __key__
      external_name: id
      export_transform: datastore.Key.name
    - property: title
      external_name: title
    - property: description
      external_name: description
    - property: date
      external_name: date
      import_transform: transform.import_date_time('%Y-%m-%d')
      export_transform: transform.export_date_time('%Y-%m-%d')
 
- kind: Membership
  connector: csv
  property_map:
    - property: __key__
      external_name: id
      export_transform: datastore.Key.name
    - property: year
      external_name: year
    - property: amount
      external_name: amount
    - property: paiementDate
      external_name: paiementDate
      import_transform: transform.import_date_time('%Y-%m-%d')
      export_transform: transform.export_date_time('%Y-%m-%d')
    - property: event
      external_name: event
      import_transform: transform.create_foreign_key('Event')
      export_transform: datastore.Key.name
    - property: member
      external_name: member
      import_transform: transform.create_foreign_key('Member')
      export_transform: datastore.Key.name
           
- kind: Member
  connector: csv
  property_map:
    - property: __key__
      external_name: id
      export_transform: datastore.Key.name
    - property: firstName
      external_name: firstName
    - property: lastName
      external_name: lastName
    - property: email
      external_name: email
    - property: company
      external_name: company
    - property: roles
      external_name: roles
      import_transform: "lambda x: x.split(';')"
      export_transform: "';'.join"
      