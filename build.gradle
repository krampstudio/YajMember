apply plugin: 'java'

configurations {
	javaAgentOpenJpa
}


repositories { mavenCentral() }

dependencies {
	javaAgentOpenJpa "org.apache.openjpa:openjpa-all:2.2.0"
	compile "org.apache.openjpa:openjpa-all:2.2.0"
	compile "org.apache.derby:derby:10.9.1.0"
	compile "javax.servlet:servlet-api:$servletVersion"
	compile "com.google.inject:guice:$guiceVersion"
	compile "com.google.code.gson:gson:$gsonVersion"
	compile "com.sun.jersey:jersey-bundle:$jerseyVersion"
	compile "com.sun.jersey.contribs:jersey-guice:$jerseyVersion"
	testCompile "junit:junit:$junitVersion"
}

task enhance(dependsOn: 'classes') << {
	ant.taskdef(name: 'openjpac', classname: 'org.apache.openjpa.ant.PCEnhancerTask'){
		 classpath{
			 pathelement(location: "build/classes/main")
			 pathelement(location: "build/resources/main")
			 pathelement(location: configurations.javaAgentOpenJpa.asPath)
		 }
	}
	ant.openjpac(){
		 classpath{
			 pathelement(location: "build/classes/main")
			 pathelement(location: "build/resources/main")
			 pathelement(location: configurations.javaAgentOpenJpa.asPath)
		 }
	}
}