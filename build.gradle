apply plugin: 'java'

configurations {
	javaAgentOpenJpa
}

repositories { mavenCentral() }

dependencies {
	javaAgentOpenJpa "org.apache.openjpa:openjpa-all:2.2.0"
	compile "org.apache.openjpa:openjpa-all:2.2.0"
	compile "org.apache.derby:derby:10.9.1.0"
	compile "javax.servlet:servlet-api:$servletVersion"
	compile "com.google.inject:guice:$guiceVersion"
	compile "com.google.code.gson:gson:$gsonVersion"
	compile "com.sun.jersey:jersey-bundle:$jerseyVersion"
	compile "com.sun.jersey.contribs:jersey-guice:$jerseyVersion"
	testCompile "junit:junit:$junitVersion"
}

test.doFirst {
	String jvmArgsOpenJpa = "-javaagent:${configurations.javaAgentOpenJpa.files.iterator().next()}"
	jvmArgs jvmArgsOpenJpa 
}